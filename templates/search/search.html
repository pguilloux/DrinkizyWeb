{% extends 'layout/base.html' %}

{% block content %}
    {% load staticfiles %}

    <div class="main wrapper clearfix search-result">
        <aside>
            <h2>Affiner la recherche</h2>
            <form method="get" action=".">

                {{ form.q }}
                <input type="submit" value="Actualiser">

                <h3>Boissons</h3>

                {{ form.categories }}
                <input type="submit" value="Actualiser">

                <h3>Localisation</h3>

                
                {{ form.districts }}
                <input type="submit" value="Actualiser">

                {{ form.stations }}

                <input type="text" placeholder="Où ? Adresse, Métro, Arr." class="inputLocalisation"/>

                {{ form.distance }}
                
                <h3>Thèmes</h3>

                {{ form.themes }}
                <input type="submit" value="Actualiser">

                <h3>Happy Hour</h3>


                <div id="slider-range"></div>


                <h3>Note</h3>

                
                
            </form>
        </aside>

        <nav>
            <ul>
                <li class="selected"><a href="#">
                    <div id="code" class="result-backCorner">
                        <img id="curl" src={% static "medias/img/cornerLeft.png" %}>
                    </div>
                    Liste
                </a></li>
                <li><a href="#">Carte
                    <div id="code2" class="result-backCorner">
                        <img id="cur2" src={% static "medias/img/cornerRight.png" %}>
                    </div>
                </a></li>
            </ul>
        </nav>
    

        <article class="search-result-list">
            <header>

                {% if query %}

                    <h5> {{page.object_list|length}} résultats pour la recherche "{{query}}"</h5> 
                {% endif %}

                <label>Trier par </label>
                <select>
                    <option value="pertinence">Pertinence</option>
                    <option value="prix">Prix</option>
                    <option value="proximité">Proximité</option>
                </select>

            </header>
            <section class="search-result-bar">
      
            <h3>Results</h3>
            {% with objects=page.object_list %}

            <ul>
                {% for result in objects|dictsort:"object.bar.name" %}
                   
                    {% ifchanged result.object.bar%}
                        <li>

                            {% with onebar=result.object.bar %}
                                {% include "search/bar_in_list.html" %}
                            {% endwith %}

                        </li>
                        <div class="clearfix"></div>
                    {%endifchanged%}
    
                {% endfor %}
             </ul>
            {% endwith %}


            {% if page.has_previous or page.has_next %}
                <div>
                    {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
                    |
                    {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
                </div>
            {% endif %}
 

            </section>

            <footer>

            </footer>
        </article>

        <article class="search-result-carte">
        <h2> Carte</h2>
        </article>
        

    <div class="clearfix"></div>



</div> <!-- #main -->

    {% block scriptjs %}
        
        <script>
          $(document).ready(function() {

            var hour_values = ["14h", "14h30", "15h", "15h30", "16h", "16h30", "17h", "17h30", "18h", "18h30", "19h", "19h30", "20h", "20h30", "21h", "21h30", "22h", "22h30", "23h", "23h30","00h", "00h30","01h", "01h30","02h", "02h30","03h", "03h30","04h", "04h30"];
             $( "#slider-range" ).slider({
                range: true,
                min: 0,
                max: 30,
                values: [ 4, 18 ],
                slide: function( event, ui ) {  
                    $(ui.handle).find("span").text(hour_values[ui.value]);
                },
                create: function(event, ui) {
                    $(this).find('.ui-slider-handle').each(function(index, element){
                        if (index == 0) {
                            $(this).addClass('first');
                            $(this).html("<span> 16h </span>");
                        }
                        else {
                            $(this).addClass('second');
                            $(this).html("<span> 23h </span>");
                        }
                    })
                }
            });
          });
        </script>
    {% endblock scriptjs %}

       

{% endblock %}
