{% extends 'layout/base.html' %}

{% block content %}

<div class="main wrapper clearfix search-result">
        <aside>
            <h2>Affiner la recherche</h2>
            <form method="get" action=".">

                {{ form.q }}
                <input type="submit" value="Actualiser">

                <h3>Boissons</h3>

                {{ form.categories }}
                <input type="submit" value="Actualiser">

                <h3>Localisation</h3>

                <input type="text" value="Où ? Adresse, Métro, Arr." class="inputLocalisation"/>

                <div id="slider-range-min"></div>

                
                <h3>Thèmes</h3>

                {{ form.themes }}
                <input type="submit" value="Actualiser">

                <h3>Happy Hour</h3>



                <h3>Note</h3>

                
                
            </form>
        </aside>

        <nav>
            <ul>
                <li class="selected"><a href="#">
                    <div id="code" class="result-backCorner">
                        <img id="curl" src="../../static/medias/img/cornerLeft.png">
                    </div>
                    Liste
                </a></li>
                <li><a href="#">Carte
                    <div id="code2" class="result-backCorner">
                        <img id="cur2" src="../../static/medias/img/cornerRight.png">
                    </div>
                </a></li>
            </ul>
        </nav>
    

        <article class="search-result-list">
            <header>

                {% if query %}
                 <h5>  {{page.object_list|length}} résultats pour la recherche "{{query}}"</h5> 
                {% endif %}

                <label>Trier par </label>
                <select>
                    <option value="pertinence">Pertinence</option>
                    <option value="prix">Prix</option>
                    <option value="proximité">Proximité</option>
                </select>

            </header>
            <section class="search-result-bar">
             {% if query %}
            <h3>Results</h3>
            {% with objects=page.object_list %}

            <ul>
                {% for result in objects|dictsort:"object.bar.name" %}
                   
                    {% ifchanged result.object.bar%}
                        <li>

                            {% with onebar=result.object.bar %}
                                {% include "search/bar_in_list.html" %}
                            {% endwith %}

                        </li>
                        <div class="clearfix"></div>
                    {%endifchanged%}
    
                {% endfor %}
             </ul>
            {% endwith %}

            <!-- Begin faceting. -->


            <div>
                <dl>
                    {% if facets.fields.theme %}
                        <dt>Theme</dt>
                        {# Provide only the top 5 authors #}
                        {% for theme in facets.fields.theme %}
                            <dd><a href="{{ request.get_full_path }}&amp;selected_facets=theme_exact:{{ theme.0|urlencode }}">{{ theme.0 }}</a> ({{ theme.1 }})</dd>
                        {% endfor %}
                    {% else %}
                        <p>No theme facets.</p>
                    {% endif %}
                </dl>

                <dl>
                    {% if facets.fields.category %}
                        <dt>Category</dt>
                        {# Provide only the top 5 authors #}
                        {% for category in facets.fields.category %}
                            <dd><a href="{{ request.get_full_path }}&amp;selected_facets=category_exact:{{ category.0|urlencode }}">{{ category.0 }}</a> ({{ category.1 }})</dd>
                        {% endfor %}
                    {% else %}
                        <p>No category facets.</p>
                    {% endif %}
                </dl>
            </div>
            <!-- End faceting -->


            {% if page.has_previous or page.has_next %}
                <div>
                    {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
                    |
                    {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
                </div>
            {% endif %}
 
        {% else %}
            {% with objects=drinkbars %}

            <ul>
                {% for result in objects|dictsort:"object.bar.name" %}
                   
                    {% ifchanged result.object.bar%}
                        <li>

                            {% with onebar=result.object.bar %}
                                {% include "search/bar_in_list.html" %}
                            {% endwith %}

                        </li>
                        <div class="clearfix"></div>
                    {%endifchanged%}
    
                {% endfor %}
             </ul>
             {% endwith %}
        {% endif %}


            </section>

            <footer>

            </footer>
        </article>

        <article class="search-result-carte">
        <h2> Carte</h2>
        </article>
        

    <div class="clearfix"></div>



</div> <!-- #main -->

    {% block scriptjs %}
        
        <script>
          $(function() {
            $( "#slider-range-min" ).slider({
                range: "min",
                value: 2,
                min: 1,
                max: 10,
                slide: function( event, ui ) {
                    $(this).find('.ui-slider-handle span').text(ui.value + " km" );
                },
                create: function(event, ui) {
                    var v=$(this).slider('value');
                    $(this).find('.ui-slider-handle').html("<span>" + v + " km"  + "</span>");
                }
            });
          });
        </script>
    {% endblock scriptjs %}

       

{% endblock %}
